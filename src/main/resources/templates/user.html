<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8"/>
	<link rel="apple-touch-icon" sizes="76x76" th:href="@{/assets/img/favicon.ico}">
	<link rel="icon" type="image/png" th:href="@{/assets/img/favicon.ico}">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<title>首页</title>
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>

	<!-- Main CSS -->
	<link th:href="@{/assets/css/main.css}" rel="stylesheet"/>

	<!-- Animation CSS -->
	<link th:href="@{/assets/css/vendor/aos.css}" rel="stylesheet"/>

</head>

<body>

<nav class="topnav navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
	<div class="container-fluid">
		<div class="navbar-collapse collapse" id="navbarColor02" style="">
			<ul class="navbar-nav mr-auto d-flex align-items-center">
				<li class="nav-item">
					<a class="nav-link"><strong>详情</strong></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" ><strong>养殖</strong></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" ><strong>疫苗</strong></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" ><strong>收支</strong></a>
				</li>
				<li class="nav-item">
					<a class="nav-link" ><strong>用户</strong></a>
				</li>
			</ul>
		</div>
	</div>
</nav>

<header>
	<div class="jumbotron jumbotron-lg jumbotron-fluid mb-0 pb-5 bg-primary position-relative">
		<div class="container-fluid text-white h-100">
			<div class="d-lg-flex align-items-center justify-content-between text-center pl-lg-5">
				<div class="col pt-12 pb-12">
					<h1 class="display-3"><strong>OMS养殖管理系统</strong></h1>
				</div>
			</div>
		</div>
	</div>
	<svg style="-webkit-transform:rotate(-180deg); -moz-transform:rotate(-180deg); -o-transform:rotate(-180deg); transform:rotate(-180deg); margin-top: -1px;" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1440 126" xml:space="preserve">
    <path class="bg-primary" d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z"></path>
    </svg>
</header>

<main class="container">
	<section class="pt-4 pb-5 " data-aos="fade-up">
		<div id="omsVueApp">
			<table class="table text-center" style="margin-bottom:0;margin-top: 100px">
				<thead class="thead-dark">
				<tr>
					<th scope="col">
						品种
					</th>
					<th scope="col">
						来源
					</th>
					<th scope="col">
						疫苗情况
					</th>
					<th scope="col">
						操作
					</th>
				</tr>
				</thead>
				<tbody>
				<tr>
					<td>
						<input type="text" class="form-control input-round" placeholder="请输入..." v-model="variety">
					</td>
					<td>
						<input type="text" class="form-control input-round" placeholder="请输入..." v-model="source">
					</td>
					<td>
						<div class="btn-group btn-group-toggle" data-toggle="buttons" style="margin: 0;">
							<label class="btn btn-secondary active" @click="isTrue">
								<input type="radio" name="options" id="option2" checked/> 已接种
							</label>
							<label class="btn btn-secondary" @click="isFalse">
								<input type="radio" name="options" id="option3" /> 未接种
							</label>
						</div>
					</td>
					<td>
						<button type="button" class="btn btn-success btn-round" @click="toList">查询</button>
						<button type="button" class="btn btn-success btn-round" @click="toAdd">新增</button>
					</td>
				</tr>
				</tbody>
			</table>
			<table class="table text-center" style="margin-bottom: 50px">
				<thead class="thead-dark">
				<tr>
					<th scope="col">
						来源
					</th>
					<th scope="col">
						品种
					</th>
					<th scope="col">
						购买价格
					</th>
					<th scope="col">
						疫苗情况
					</th>
					<th scope="col">
						饲养情况
					</th>
					<th scope="col">
						入库时间
					</th>
				</tr>
				</thead>
				<tbody>
				<tr v-for = "(item) in list" :key = "item.id">
					<td>
						{{item.variety}}
					</td>
					<td>
						{{item.source}}
					</td>
					<td>
						{{item.buyingPrice}}
					</td>
					<td>
						{{item.isVaccine ? '已接种' : '未接种'}}
					</td>
					<td>
						{{item.isFeeding ? '饲养中' : '未饲养'}}
					</td>
					<td>
						{{item.startTime}}
					</td>
				</tr>
				</tbody>
			</table>
			<nav aria-label="Page navigation example" style="margin-top: -30px;margin-bottom: 50px;">
				<ul class="pagination" >
					<li class="page-item"><i class="fas fa-angle-left"></i></a></li>
					<div v-for = "(page) in pageList">
						<li class="page-item"><a class="page-link" @click="toList(page)">{{page}}</a></li>
					</div>
					<li class="page-item"><i class="fas fa-angle-right"></i></a></li>
				</ul>
			</nav>
		</div>
	</section>
</main>

<!--------------------------------------
FOOTER
 --------------------------------------->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 1440 126" style="enable-background:new 0 0 1440 126;" xml:space="preserve">
<path class="bg-black" d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z"/>
</svg>
<footer class="bg-black pb-5">
</footer>


<script th:src="@{/assets/js/vendor/jquery.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/vendor/popper.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/vendor/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/vendor/share.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/functions.js}" type="text/javascript"></script>
<script th:src="@{/assets/js/vendor/aos.js}" type="text/javascript"></script>
<!-- 引入Vue -->
<script th:src="@{/vue/vue.js}"></script>
<!-- 引入Axios -->
<script th:src="@{/axios/axios.js}"></script>

<script>
	AOS.init({
		duration: 700
	});

	AOS.init({
		disable: function () {
			var maxWidth = 1200;
			return window.innerWidth < maxWidth;
		}
	});

	$('.carousel').on('slide.bs.carousel', function (event) {
		var height = $(event.relatedTarget).height();
		var $innerCarousel = $(event.target).find('.carousel-inner');
		$innerCarousel.animate({
			height: height
		});
	});

	$(function () {
		$('[data-toggle="popover"]').popover()
	});

	$('.popover-dismiss').popover({
		trigger: 'focus'
	});

	$(function () {
		$('[data-toggle="tooltip"]').tooltip()
	});
</script>

<script>
	new Vue({
		el: '#omsVueApp',
		data: {
			variety : '',
			source : '',
			isVaccine : true,
			list : [{
				id : '',
				variety : '',
				source : '',
				buyingPrice : 0,
				isVaccine : false,
				isFeeding : false,
				startTime : ''
			}],
			total : 0,
			pageList : [],
			pageNum : 1
		},
		methods : {
			toList(pageNum) {
				if(pageNum === undefined){
					this.pageNum = 1
				}else {
					this.pageNum = pageNum
				}
				axios({
					method: 'get',
					url: '/detail/list',
					params: {
						variety: this.variety,
						source: this.source,
						isVaccine: this.isVaccine,
						pageSize : 10,
						pageNum : this.pageNum
					}
				})
						.then(this.listInit)
						.catch(function (error) {
							alert(error)
						});
			},
			listInit(response){
				if(response.data.code === 200 ){
					this.list = response.data.collection;
					this.total = response.data.total;
					this.pageList = [];
					const num = parseInt((this.total%100)/10);
					for (i = 1; i <= num+1; i++) {
						this.pageList.push(i)
					}
				}
			},
			isTrue(){
				console.log(true)
				this.isVaccine = true;
			},
			isFalse(){
				console.log(false)
				this.isVaccine = false;
			},
			toAdd(){

			}
		},
		created:function () {
			this.toList();
		}
	});
</script>

</body>



</html>